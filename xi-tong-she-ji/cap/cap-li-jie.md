# CAP理解

**Q**：CAP中的P是指什么？

CAP中，P的英文是Network Partition，即网络分区。

* ①假设系统中有2个机器，分别为a/b， 这两台机器正常情况是联通的，在某一时间，a/b之间无法连接，即无法进行网络通信，这就是形成了网络分区。
* ②假设系统中有4个机器，分别为a/b/c/d， 这四台机器正常情况是两两互联的，在某一时间，由于一些原因，a/b可以互联，c/d可以互联，但是这两组之间无法通信，这也是形成了网络分区。
* ③假设系统中有4个机器，分别为a/b/c/d， 这四台机器正常情况是两两互联的，在某一时间，由于一些原因，a被隔离，b/c/d可以两两互联，但是a无法与b/c/d互联，这也是形成了网络分区。这种情况是实际场景中最常见的网络分区形式。

造成网络分区的原因可能是网络不通，也可能是机器挂了，也可能是机器没挂但系统服务挂了，也有可能是发生了系统服务也没挂掉，但hung住了，比如Java程序发生了较长时间的Stop The World的GC等（更多情况可阅读\[[aphyr](https://github.com/aphyr)/[**partitions-post**](https://github.com/aphyr/partitions-post)\]），这些原因通常是无法进行区分的，但是最终表现就是无法接通，所以归为一类，统称为Network Partition。在分布式系统中下，发生网络分区是大概率事件，假设对一台服务器而言，开一年必宕机一次，那么365台机器的集群必然天天宕机。

所以，在进行CAP选择中，都会设计为可以容忍网络分区，因为这几乎是不可避免的，即在分布式系统出现网络分区时，去保证一致性C或可用性A。所以CAP的三选二，基本都是CP或AP。





## 参考

[CAP理论中的P到底是什么意思？  
](https://www.zhihu.com/question/64778723)  
  
  


